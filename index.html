<!DOCTYPE html>
<html lang="ja">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FGQKYE650R"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-FGQKYE650R');
  </script>

  <!-- 基本メタタグ -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, viewport-fit=cover" />

  <!-- SEOメタタグ - title, description, keywordsはreact-helmet-asyncで言語別に動的設定 -->
  <meta name="author" content="We diet" />
  <!-- robots タグはreact-helmet-asyncで動的設定 -->
  <meta name="language" content="Japanese" />
  <meta name="geo.region" content="JP" />
  <meta name="geo.country" content="Japan" />
  <meta name="rating" content="General" />
  <meta name="referrer" content="no-referrer-when-downgrade" />

  <!-- OGPタグはreact-helmet-asyncで言語別に動的設定 -->
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:locale" content="ja_JP" />

  <!-- Twitter Cardタグはreact-helmet-asyncで言語別に動的設定 -->

  <!-- 追加SEOタグ -->
  <meta name="theme-color" content="#2196f3" />
  <meta name="msapplication-TileColor" content="#2196f3" />
  <meta name="application-name" content="We diet" />
  <meta name="apple-mobile-web-app-title" content="We diet" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

  <!-- Canonical URL と hreflang はreact-helmet-asyncで言語別に動的設定 -->

  <!-- DNS事前解決（クリティカルパス最適化） -->
  <link rel="preconnect" href="https://res.cloudinary.com" crossorigin>
  <link rel="dns-prefetch" href="https://res.cloudinary.com">

  <!-- Google Fonts 事前接続 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Google Fonts (Noto Sans JP) -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- LCP Hero画像のプリロード（トップページ用） -->
  <!-- Note: プリロードは実際にトップページで使用される画像のみに適用 -->
  <!-- <link rel="preload" as="image" href="https://res.cloudinary.com/drmyhhtjo/image/upload/w_412,h_320,c_fill,q_auto,f_auto/v1753593907/afa4835f-e2b4-49f9-b342-1c272be930d3_cngflc.webp" media="(max-width: 768px)" fetchpriority="high"> -->
  <!-- <link rel="preload" as="image" href="https://res.cloudinary.com/drmyhhtjo/image/upload/w_1920,h_500,c_fill,q_auto,f_auto/v1753593907/afa4835f-e2b4-49f9-b342-1c272be930d3_cngflc.webp" media="(min-width: 769px)" fetchpriority="high"> -->

  <!-- Critical CSS inlined -->
  <style>
    /* Critical CSS for above-the-fold content */
    * {
      box-sizing: border-box;
    }

    html {
      overflow-x: hidden;
      width: 100%;
      max-width: 100vw;
    }

    body {
      margin: 0;
      font-family: 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
      width: 100%;
      max-width: 100vw;
    }

    /* Hero section critical styles */
    .hero-section {
      position: relative;
      width: 100vw;
      height: 500px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @media (max-width: 768px) {
      .hero-section {
        height: 320px;
      }

      body {
        font-size: 14px;
        line-height: 1.4;
      }
    }
  </style>


  <!-- ファビコン -->
  <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/favicon.ico" />

  <!-- 構造化データ (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "We diet - ダイエットSNS",
    "description": "ダイエットSNS「We diet」は食事レコード・運動レコード・体重記録をSNSで共有できるダイエット記録アプリ。仲間とダイエット記録を励まし合い、健康的な生活習慣を継続サポート。",
    "url": "https://we-diet.net",
    "applicationCategory": "HealthApplication",
    "operatingSystem": "Web",
    "browserRequirements": "Requires JavaScript. Requires HTML5.",
    "softwareVersion": "1.0",
    "datePublished": "2025-01-08",
    "dateModified": "2025-01-08",
    "author": {
      "@type": "Organization",
      "name": "We diet"
    },
    "publisher": {
      "@type": "Organization", 
      "name": "We diet",
      "url": "https://we-diet.net"
    },
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "JPY",
      "availability": "https://schema.org/InStock"
    },
    "featureList": [
      "食事レコード・食事記録・カロリー記録",
      "運動レコード・運動記録・エクササイズ記録", 
      "体重記録・体重管理・進捗記録",
      "ダイエットSNS機能・仲間との励まし合い",
      "健康記録データ分析・レポート機能"
    ],
    "screenshot": "https://res.cloudinary.com/drmyhhtjo/image/upload/v1753593907/afa4835f-e2b4-49f9-b342-1c272be930d3_cngflc.webp",
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "4.5",
      "reviewCount": "150",
      "bestRating": "5",
      "worstRating": "1"
    },
    "keywords": "ダイエット SNS レコード 食事記録 運動記録 体重記録 健康管理",
    "sameAs": [
      "https://we-diet.net"
    ]
  }
  </script>

  <!-- 追加構造化データ (Organization) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "We diet",
    "url": "https://we-diet.net",
    "logo": "https://we-diet.net/favicon.ico",
    "description": "健康的なライフスタイルをサポートするダイエット・健康管理アプリを提供",
    "foundingDate": "2025",
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "customer service",
      "areaServed": "JP",
      "availableLanguage": "Japanese"
    },
    "sameAs": [
      "https://we-diet.net"
    ]
  }
  </script>

</head>

<body>
  <div id="root"></div>

  <!-- Facebook JavaScript SDK -->
  <div id="fb-root"></div>

  <script>
    // Global error handler for debugging iOS Safari issues
    window.onerror = function (message, source, lineno, colno, error) {
      alert("Error: " + message + "\nSource: " + source + "\nLine: " + lineno);
    };

    // Unhandled promise rejection handler
    window.addEventListener('unhandledrejection', function (event) {
      alert("Unhandled Promise Rejection: " + event.reason);
    });

    // Facebook SDK will be initialized dynamically from React app
    // This ensures environment variables are properly loaded
  </script>

  <script type="module" src="/src/index.tsx"></script>
</body>

</html>