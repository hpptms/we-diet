<!DOCTYPE html>
<html lang="ja">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FGQKYE650R"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    // 一時的にGoogle Analyticsを無効化（エラー修正のため）
    console.log('Google Analytics temporarily disabled for debugging');
    window.gtag = function () {
      console.log('GA call suppressed:', arguments);
    };

    // グローバルエラーハンドラーでGA関連エラーをキャッチ
    window.addEventListener('error', function (event) {
      if (event.error && event.error.message &&
        (event.error.message.includes('google-analytics') ||
          event.error.message.includes('gtag') ||
          event.filename && event.filename.includes('gtag'))) {
        console.warn('Google Analytics error caught and handled:', event.error);
        event.preventDefault(); // エラーの伝播を止める
        return true;
      }
    });

    // Fetch API のエラーもキャッチ
    const originalFetch = window.fetch;
    window.fetch = function (...args) {
      const url = args[0];
      if (typeof url === 'string' && url.includes('google-analytics.com')) {
        return originalFetch.apply(this, args).catch(error => {
          console.warn('Google Analytics fetch error caught and handled:', error);
          // GA エラーは無視してPromiseを解決
          return new Response('{}', { status: 200, statusText: 'OK' });
        });
      }
      return originalFetch.apply(this, args);
    };
  </script>

  <!-- 基本メタタグ -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO強化メタタグ -->
  <title>We diet - ダイエット・健康管理SNSアプリ | 食事記録・運動記録・体重管理</title>
  <meta name="description"
    content="We dietは、ダイエットと健康管理を楽しくサポートするSNSアプリです。食事記録、運動記録、体重管理機能に加え、仲間と一緒に励まし合えるソーシャル機能で、継続的な健康習慣をサポートします。無料でご利用いただけます。" />
  <meta name="keywords"
    content="ダイエット,健康管理,食事記録,運動記録,体重管理,フィットネス,ヘルシー,SNS,ダイエットアプリ,健康アプリ,カロリー管理,エクササイズ,ワークアウト,減量,ダイエット仲間,健康習慣,栄養管理,Diet,Fitness,Health,Weight Loss,Exercise,Nutrition,Workout" />
  <meta name="author" content="We diet" />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="Japanese" />

  <!-- Open Graph タグ (Facebook, LinkedIn等) -->
  <meta property="og:title" content="We diet - ダイエット・健康管理SNSアプリ" />
  <meta property="og:description" content="仲間と一緒に楽しくダイエット！食事・運動・体重を記録して、健康的な生活習慣を身につけましょう。" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://we-diat.com" />
  <meta property="og:image"
    content="https://res.cloudinary.com/drmyhhtjo/image/upload/v1753593907/afa4835f-e2b4-49f9-b342-1c272be930d3_cngflc.webp" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:site_name" content="We diet" />
  <meta property="og:locale" content="ja_JP" />

  <!-- Twitter Card タグ -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="We diet - ダイエット・健康管理SNSアプリ" />
  <meta name="twitter:description" content="仲間と一緒に楽しくダイエット！食事・運動・体重を記録して、健康的な生活習慣を身につけましょう。" />
  <meta name="twitter:image"
    content="https://res.cloudinary.com/drmyhhtjo/image/upload/v1753593907/afa4835f-e2b4-49f9-b342-1c272be930d3_cngflc.webp" />

  <!-- 追加SEOタグ -->
  <meta name="theme-color" content="#2196f3" />
  <meta name="msapplication-TileColor" content="#2196f3" />
  <meta name="application-name" content="We diet" />
  <meta name="apple-mobile-web-app-title" content="We diet" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />

  <!-- Canonical URL -->
  <link rel="canonical" href="https://we-diat.com" />

  <!-- ファビコン -->
  <link rel="icon" type="image/svg+xml" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/favicon.ico" />

  <!-- 構造化データ (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "We diet",
    "description": "ダイエットと健康管理を楽しくサポートするSNSアプリ。食事記録、運動記録、体重管理機能で健康習慣をサポート。",
    "url": "https://we-diat.com",
    "applicationCategory": "HealthApplication",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "JPY"
    },
    "featureList": [
      "食事記録",
      "運動記録", 
      "体重管理",
      "SNS機能",
      "健康データ分析"
    ],
    "screenshot": "https://res.cloudinary.com/drmyhhtjo/image/upload/v1753593907/afa4835f-e2b4-49f9-b342-1c272be930d3_cngflc.webp"
  }
  </script>

  <!-- 追加構造化データ (Organization) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "We diet",
    "url": "https://we-diat.com",
    "logo": "https://we-diat.com/favicon.ico",
    "description": "健康的なライフスタイルをサポートするダイエット・健康管理アプリを提供"
  }
  </script>
</head>

<body>
  <div id="root"></div>

  <!-- Facebook JavaScript SDK -->
  <div id="fb-root"></div>

  <script>
    // Facebook SDK will be initialized dynamically from React app
    // This ensures environment variables are properly loaded
  </script>

  <script type="module" src="/src/index.tsx"></script>
</body>

</html>